---
title: 'Determinants of increasing COVID-19 fatality rates after SARS-CoV-2 P.1 emergence in Brazil'
author: Andrea Brizzi, 
Charles Whittaker, 
Luciana M. S. Servo, 
Iwona Hawryluk, 
Carlos A. Prete Jr, 
William M. de Souza, 
Renato S. Aguiar,
Leonardo J. T. Araujo,
Leonardo S. Bastos,
Alexandra Blenkinsop, 
Lewis F. Buss, 
Darlan Candido,
Marcia C. Castro,
Silvia F. Costa,
Julio Croda,
Andreza Aruska de Souza Santos ,
Christopher Dye,
Seth Flaxman, % change to Department of Computer Science
Paula L. C. Fonseca,
Victor E. V. Geddes,
Bernardo Gutierrez,
Philippe Lemey,
Anna S. Levin,
% JT McCrone ,
Thomas Mellan,
Diego M. Bonfim,
Xenia Miscouridou,
Swapnil Mishra,
Mélodie Monod, 
Filipe R. R. Moreira,
Bruce Nelson , 
Rafael H. M. Pereira , 
Otavio Ranzani,
Ricardo P. Schnekenberg,
Elizaveta Semenova,
Raphael Sonnabend, 
Renan P. Souza, 
Xiaoyue Xi, 
Ester C. Sabino,
Nuno R. Faria,
Samir Bhatt,
Oliver Ratmann

output:
  html_document: 
    default
params:
  stanModelFile:
    value: x
  job_dir:
    value: x
  job_tag:
    value: x
  selected.locs:
    value: x
---
  
```{r setup, include=FALSE}
library(knitr)
opts_chunk$set(echo = TRUE)
```

```{r, include=FALSE}
if(1)
{
  args = params  
}
if(0)
{
  args <- list()
  args$stanModelFile <- 'age_hfr_210719b.stan'
  args$job_tag <- 'hfr-fit-210719b1-resources2-ex0-trvaluelogsc-hd1'
  args$job_dir <- '/Users/or105/sandbox/hfr-fit-210719b1-resources2-ex0-trvaluelogsc-hd1'
  args$selected.locs <- c('belo horizonte','curitiba', "florianopolis", "goiania", "joao pessoa", "macapa", 'manaus', "natal", 'porto alegre', "porto velho", 'rio de janeiro', 'salvador', 'sao paulo', "sao luis")
}
args$locs <- gsub(' ','',args$selected.locs)
file.to.figure = function(name) file.path(args$job_dir, paste0(args$job_tag, "_", name, ".png"))
```

## Session info
This file presents the results of Stan model 
```{r, echo=FALSE}
args$stanModelFile
```
with job tag
```{r, echo=FALSE}
args$job_tag
```

## Objectives

Several studies have reported significantly higher, crude in-hospital fatality rates following COVID-19 attributable hospital admission across Brazil after P.1 detection. The overall, primary objective of this study was to 

- assess infection severity of SARS-CoV-2 P.1 in the context of increased hospital admissions and increasing health care resources across most of Brazil

More detailed objectives were to

- characterise time trends in COVID-19 attributable fatal outcomes
- identify time trends in in-hospital fatality rates before and after P.1 emergence
- characterise time trends health care resources
- characterise differences in the absolute magnitude in in-hospital fatality rates across Brazil based on health care resources
- determine the relative contribution of P.1 and increasing health care demand due to a more infectious P.1 to increases in crude in-hospital fatality rates 

## Methods

We

- Performed a longitudinal observational study across Brazilian state capitals, using hospital admissions of severe acute respiratory infections and associated clinical outcomes reported to the SIVEP-Gripe platform. Data on population denominators and health care resources are from the Instituto de Pesquisa Econômica Aplicada, Ipea, and several databases from the Ministry of Health.
- Sequence data from GISAID was used to identify state capitals in which P.1 was detected by March 31 2021. P.1 was detected in 14 state capitals. Analyses were performed independently for each of the 14 cities to guard against the potential presence and impact of unmeasured confounders to this observational analysis.
- To disentangle the impact of P.1 versus increasing health care demand, we performed a modelling study. Briefly:
- We used GISAID data to calculate the frequency of P.1 infections over time in each city, and developed a multi-strain model to estimate local replacement dynamics. This allowed us to decompose the COVID-19 attributable deaths and COVID-19 attributable hospital admissions by SARS-CoV-2 variant, and then to calculate fatality rates per variant.
- We linked in the model fatality rates to health care demand predictors that describe demand per unit resource. This allowed us to estimate associations between fatality rates, health care demand, and health care resources, and to determine the relative contribution of P.1 versus demand per resources to fatality rates.

## Results

### Data: Population denominators {.tabset .tabset-fade}

As population denominators, we used 2020 population size projects from the PNADc survey of the Instituto Brasileiro de Geografia e Estatística (IBGE). Population denominators were not consistent with individual-level data on vaccine administrations in each location, which could be due to unreported location of residence at time of vaccine administration. We adjusted population denominators upwards so that at most 99 percent of the population had received a first dose, and never adjusted population denominators downwards.

```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("pop_pyramid"))){
  knitr::include_graphics(file.to.figure("pop_pyramid"))
}
```

### Data: COVID-19 attributable fatal outcomes {.tabset .tabset-fade}

Reported COVID-19 attributable deaths were stratified by location of death (out of hospital, private hospitals, public hospitals, private or public hospitals). Reported deaths in hospitals were adjusted upwards to account for patients with unkwnown outcomes. Censoring-adjusted deaths were compared to excess deaths:

```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("deathsn_over_time_byexpobs_2"))){
  knitr::include_graphics(file.to.figure("deathsn_over_time_byexpobs_2"))
}
```

### Data: Age composition of COVID-19 attributable fatal outcomes {.tabset .tabset-fade}

We find substantial changes in the age composition of COVID-19 attributable deaths over time, since vaccine roll-out and since P.1 emergence:

#### Cities 1
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("deaths_adj_p_facet_part1"))){
  knitr::include_graphics(file.to.figure("deaths_adj_p_facet_part1"))
}
```

#### Cities 2
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("deaths_adj_p_facet_part2"))){
  knitr::include_graphics(file.to.figure("deaths_adj_p_facet_part2"))
}
```

#### Cities 3
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("deaths_adj_p_facet_part3"))){
  knitr::include_graphics(file.to.figure("deaths_adj_p_facet_part3"))
}
```

### Data: Vaccine roll-out {.tabset .tabset-fade}

In our modelling we adjusted for protection from fatal outcomes 2 weeks after vaccine administration:

#### Cities 1
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("pop_prop_vaxcomp_part1"))){
  knitr::include_graphics(file.to.figure("pop_prop_vaxcomp_part1"))
}
```

#### Cities 2
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("pop_prop_vaxcomp_part2"))){
  knitr::include_graphics(file.to.figure("pop_prop_vaxcomp_part2"))
}
```

#### Cities 3
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("pop_prop_vaxcomp_part3"))){
  knitr::include_graphics(file.to.figure("pop_prop_vaxcomp_part3"))
}
```

### Data: Health care demand predictors {.tabset .tabset-fade}

#### SARI admissions in this and next two weeks per critical care bed
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("hfr_predictors_hosps.per.saribeds.02_bycity"))){
  knitr::include_graphics(file.to.figure("hfr_predictors_hosps.per.saribeds.02_bycity"))
}
```

#### SARI admissions in this and next two weeks per critical care bed with ventilator
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("hfr_predictors_hosps.per.saribedsvent.02_bycity"))){
  knitr::include_graphics(file.to.figure("hfr_predictors_hosps.per.saribedsvent.02_bycity"))
}
```


#### SARI admissions in this and next two weeks per nurse
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("hfr_predictors_hosps.per.nurse.02_bycity"))){
  knitr::include_graphics(file.to.figure("hfr_predictors_hosps.per.nurse.02_bycity"))
}
```

#### SARI admissions in this and next two weeks per physician
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("hfr_predictors_hosps.per.physicians.all.02_bycity"))){
  knitr::include_graphics(file.to.figure("hfr_predictors_hosps.per.physicians.all.02_bycity"))
}
```

#### SARI admissions in this and next two weeks per ventilator
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("hfr_predictors_hosps.per.ventilator.02_bycity"))){
  knitr::include_graphics(file.to.figure("hfr_predictors_hosps.per.ventilator.02_bycity"))
}
```

#### ICU admissions in this and next two weeks per ICU bed
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("hfr_predictors_icu.per.beds.02_bycity"))){
  knitr::include_graphics(file.to.figure("hfr_predictors_icu.per.beds.02_bycity"))
}
```

#### ICU admissions in this and next two weeks per nurse
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("hfr_predictors_icu.per.nurse.02_bycity"))){
  knitr::include_graphics(file.to.figure("hfr_predictors_icu.per.nurse.02_bycity"))
}
```

#### ICU admissions in this and next two weeks per physician
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("hfr_predictors_icu.per.physicians.all.02_bycity"))){
  knitr::include_graphics(file.to.figure("hfr_predictors_icu.per.physicians.all.02_bycity"))
}
```

#### ICU admissions in this and next two weeks per intensive care specialist
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("hfr_predictors_icu.per.intensivists.02_bycity"))){
  knitr::include_graphics(file.to.figure("hfr_predictors_icu.per.instensivists.02_bycity"))
}
```

#### ICU admissions in this and next two weeks per physioterapist
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("hfr_predictors_icu.per.physiotherapist.02_bycity"))){
  knitr::include_graphics(file.to.figure("hfr_predictors_icu.per.physiotherapist.02_bycity"))
}
```

#### ICU admissions in this and next two weeks per technical nurse
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("hfr_predictors_icu.per.tech.nurse.02_bycity"))){
  knitr::include_graphics(file.to.figure("hfr_predictors_icu.per.tech.nurse.02_bycity"))
}
```


#### ICU admissions in this and next two weeks per ventilator
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("hfr_predictors_icu.per.ventilator.02_bycity"))){
  knitr::include_graphics(file.to.figure("hfr_predictors_icu.per.ventilator.02_bycity"))
}
```


### Decomposition: P.1 replacement dynamics by city {.tabset .tabset-fade}

##### P.1 genotype frequency
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("allloc_seq_propP1_over_time"))
}
```

##### COVID-19 attributable hospital admissions
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hosps_by_variant"))){
  knitr::include_graphics(file.to.figure("allloc_hosps_by_variant"))
}
```

##### COVID-19 attributable deaths
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_deaths_by_variant"))){
  knitr::include_graphics(file.to.figure("allloc_deaths_by_variant"))
}
```

### Temporal variation: Overall in-hospital fatality rates by city (age-standardised to avg age composition across cities, so comparable across cities with different age composition) {.tabset .tabset-fade}

Dotted lines show minimum HFR that was achieved in each city during the observation period, which we use later for excess death calculations.

```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfr_agestd_over_time_grouped"))){
  knitr::include_graphics(file.to.figure("allloc_hfr_agestd_over_time_grouped"))
}
```

### Temporal variation: Time trends in in-hospital fatality rates by city (age group 40-49, P1 line vs non-P1 dotted) {.tabset .tabset-fade}
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfr_over_time_by_variant"))){
  knitr::include_graphics(file.to.figure("allloc_hfr_over_time_by_variant"))
}
```


### Temporal variation: Time trends in in-hospital fatality rates by city (all ages, P1 line vs non-P1 dotted) {.tabset .tabset-fade}
`r if ('belohorizonte' %in% args$locs) '#### Belo Horizonte'`
```{r, include=('belohorizonte' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("belohorizonte_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("belohorizonte_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('curitiba' %in% args$locs) '#### Curitiba'`
```{r, include=('curitiba' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("curitiba_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("curitiba_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('florianopolis' %in% args$locs) '#### Florianopolis'`
```{r, include=('florianopolis' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("florianopolis_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("florianopolis_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('goiania' %in% args$locs) '#### Goiania'`
```{r, include=('goiania' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("goiania_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("goiania_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('joaopessoa' %in% args$locs) '#### Joao Pessoa'`
```{r, include=('joaopessoa' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("joaopessoa_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("joaopessoa_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('macapa' %in% args$locs) '#### Macapa'`
```{r, include=('macapa' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("macapa_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("macapa_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('manaus' %in% args$locs) '#### Manaus'`
```{r, include=('manaus' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("manaus_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("manaus_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('natal' %in% args$locs) '#### Natal'`
```{r, include=('natal' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("natal_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("natal_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('portoalegre' %in% args$locs) '#### Porto Alegre'`
```{r, include=('portoalegre' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("portoalegre_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("portoalegre_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('portovelho' %in% args$locs) '#### Porto Velho'`
```{r, include=('portovelho' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("portovelho_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("portovelho_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('riodejaneiro' %in% args$locs) '#### Rio de Janeiro'`
```{r, include=('riodejaneiro' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("riodejaneiro_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("riodejaneiro_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('salvador' %in% args$locs) '#### Salvador'`
```{r, include=('salvador' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("salvador_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("salvador_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('saopaulo' %in% args$locs) '#### Sao Paulo'`
```{r, include=('saopaulo' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("saopaulo_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("saopaulo_hfr_over_time_by_variant_vs_empirical"))
}
```

`r if ('saoluis' %in% args$locs) '#### Sao Luis'`
```{r, include=('saoluis' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("saoluis_hfr_over_time_by_variant_vs_empirical"))){
  knitr::include_graphics(file.to.figure("saoluis_hfr_over_time_by_variant_vs_empirical"))
}
```


### Inequity: in-hospital fatality rates across cities, standardised to baseline demand  {.tabset .tabset-fade} 

#### Baseline in-hospital fatality rates standardised to baseline demand 
```{r, out.width="80%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfrbaseline"))){
  knitr::include_graphics(file.to.figure("allloc_hfrbaseline"))
}
```

#### Ratio in baseline in-hospital fatality rates
```{r, out.width="80%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfrbaseline_ratio"))){
  knitr::include_graphics(file.to.figure("allloc_hfrbaseline_ratio"))
}
```

#### Association of overall baseline in-hospital fatality rates with health care indicators
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfrbaseline_vs_predictors"))){
  knitr::include_graphics(file.to.figure("allloc_hfrbaseline_vs_predictors"))
}
```

#### Association of baseline in-hospital fatality rates with ICU beds
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfrbaseline_vs_predictor_r.icubeds.all"))){
  knitr::include_graphics(file.to.figure("allloc_hfrbaseline_vs_predictor_r.icubeds.all"))
}
```

#### Association of baseline in-hospital fatality rates with ventilators
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfrbaseline_vs_predictor_r.ventilator"))){
  knitr::include_graphics(file.to.figure("allloc_hfrbaseline_vs_predictor_r.ventilator"))
}
```

#### Association of baseline in-hospital fatality rates with physicians
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfrbaseline_vs_predictor_r.physicians.all"))){
  knitr::include_graphics(file.to.figure("allloc_hfrbaseline_vs_predictor_r.physicians.all"))
}
```

#### Association of baseline in-hospital fatality rates with critical care specialists
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfrbaseline_vs_predictor_r.physicians.specialist"))){
  knitr::include_graphics(file.to.figure("allloc_hfrbaseline_vs_predictor_r.physicians.specialist"))
}
```

#### Association of baseline in-hospital fatality rates with nurses
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfrbaseline_vs_predictor_r.nurse"))){
  knitr::include_graphics(file.to.figure("allloc_hfrbaseline_vs_predictor_r.nurse"))
}
```

#### Association of baseline in-hospital fatality rates with technical nurses
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfrbaseline_vs_predictor_r.tech.nurse"))){
  knitr::include_graphics(file.to.figure("allloc_hfrbaseline_vs_predictor_r.tech.nurse"))
}
```

#### Association of baseline in-hospital fatality rates with physiotherapists
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfrbaseline_vs_predictor_r.physiotherapist"))){
  knitr::include_graphics(file.to.figure("allloc_hfrbaseline_vs_predictor_r.physiotherapist"))
}
```

#### Regression coefficients {.tabset .tabset-fade}
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_frmult_regrcoeff_v2"))){
  knitr::include_graphics(file.to.figure("allloc_frmult_regrcoeff_v2"))
}
```

### Pandemic demand: multipliers to in-hospital fatality rates  {.tabset .tabset-fade} 

#### Multiplier to in-hospital fatality rates
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfr_multiplier"))){
  knitr::include_graphics(file.to.figure("allloc_hfrmin_multiplier"))
}
```

#### Multiplier to in-hospital fatality rates (version big)
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfr_multiplier2"))){
  knitr::include_graphics(file.to.figure("allloc_hfrmin_multiplier2"))
}
```


#### Excess deaths associated with pandemic demand relative to minimum HFR that was achieved in each city at some point
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfrmin_excessdeaths"))){
  knitr::include_graphics(file.to.figure("allloc_hfrmin_excessdeaths"))
}
```

#### Percentage reduction in deaths under minimum HFR that was achieved in each city at some point
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfrmin_pcred"))){
  knitr::include_graphics(file.to.figure("allloc_hfrmin_pcred"))
}
```


### P.1 vs non-P.1: effect to in-hospital fatality rates  {.tabset .tabset-fade}

##### Ratio in-hospital fatality rates P.1 vs non-P.1
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hfr_P1_vs_wildtype_ratio"))){
  knitr::include_graphics(file.to.figure("allloc_hfr_P1_vs_wildtype_ratio"))
}
```

##### Ratio share of age groups among hospital admissions P.1 vs non-P.1
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hosps_ratio_age_composition"))){
  knitr::include_graphics(file.to.figure("allloc_hosps_ratio_age_composition"))
}
```

##### Ratio share of age groups among deaths P.1 vs non-P.1
```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_deaths_ratio_age_composition"))){
  knitr::include_graphics(file.to.figure("allloc_deaths_ratio_age_composition"))
}
```



### Model fits by city  {.tabset .tabset-fade}

```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_hospn_fit_scatter"))){
  knitr::include_graphics(file.to.figure("allloc_hospn_fit_scatter"))
}
```

```{r, out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("allloc_deaths_ndeaths_fit_scatter"))){
  knitr::include_graphics(file.to.figure("allloc_deaths_ndeaths_fit_scatter"))
}
```


`r if ('belohorizonte' %in% args$locs) '#### Belo Horizonte'`
`r if ('belohorizonte' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('belohorizonte' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("belohorizonte_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("belohorizonte_seq_propP1_over_time"))
}
```

`r if ('belohorizonte' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('belohorizonte' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("belohorizonte_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("belohorizonte_hospc_by_variant_with_empirical"))
}
```

`r if ('belohorizonte' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('belohorizonte' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("belohorizonte_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("belohorizonte_hosps_phosps_vs_fitted"))
}
```

`r if ('belohorizonte' %in% args$locs) '##### Fit to death data'`
```{r, include=('belohorizonte' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("belohorizonte_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("belohorizonte_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('belohorizonte' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('belohorizonte' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("belohorizonte_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("belohorizonte_deaths_pdeaths_vs_fitted"))
}
```

`r if ('curitiba' %in% args$locs) '#### Curitiba'`
`r if ('curitiba' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('curitiba' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("curitiba_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("curitiba_seq_propP1_over_time"))
}
```

`r if ('curitiba' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('curitiba' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("curitiba_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("curitiba_hospc_by_variant_with_empirical"))
}
```

`r if ('curitiba' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('curitiba' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("curitiba_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("curitiba_hosps_phosps_vs_fitted"))
}
```

`r if ('curitiba' %in% args$locs) '##### Fit to death data'`
```{r, include=('curitiba' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("curitiba_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("curitiba_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('curitiba' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('curitiba' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("curitiba_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("curitiba_deaths_pdeaths_vs_fitted"))
}
```

`r if ('florianopolis' %in% args$locs) '#### Florianopolis'`
`r if ('florianopolis' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('florianopolis' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("florianopolis_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("florianopolis_seq_propP1_over_time"))
}
```

`r if ('florianopolis' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('florianopolis' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("florianopolis_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("florianopolis_hospc_by_variant_with_empirical"))
}
```

`r if ('florianopolis' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('florianopolis' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("florianopolis_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("florianopolis_hosps_phosps_vs_fitted"))
}
```

`r if ('florianopolis' %in% args$locs) '##### Fit to death data'`
```{r, include=('florianopolis' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("florianopolis_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("florianopolis_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('florianopolis' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('florianopolis' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("florianopolis_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("florianopolis_deaths_pdeaths_vs_fitted"))
}
```

`r if ('goiania' %in% args$locs) '#### Goiania'`
`r if ('goiania' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('goiania' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("goiania_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("goiania_seq_propP1_over_time"))
}
```

`r if ('goiania' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('goiania' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("goiania_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("goiania_hospc_by_variant_with_empirical"))
}
```

`r if ('goiania' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('goiania' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("goiania_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("goiania_hosps_phosps_vs_fitted"))
}
```

`r if ('goiania' %in% args$locs) '##### Fit to death data'`
```{r, include=('goiania' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("goiania_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("goiania_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('goiania' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('goiania' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("goiania_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("goiania_deaths_pdeaths_vs_fitted"))
}
```

`r if ('joaopessoa' %in% args$locs) '#### Joao Pessoa'`
`r if ('joaopessoa' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('joaopessoa' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("joaopessoa_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("joaopessoa_seq_propP1_over_time"))
}
```

`r if ('joaopessoa' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('joaopessoa' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("joaopessoa_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("joaopessoa_hospc_by_variant_with_empirical"))
}
```

`r if ('joaopessoa' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('joaopessoa' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("joaopessoa_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("joaopessoa_hosps_phosps_vs_fitted"))
}
```

`r if ('joaopessoa' %in% args$locs) '##### Fit to death data'`
```{r, include=('joaopessoa' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("joaopessoa_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("joaopessoa_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('joaopessoa' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('joaopessoa' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("joaopessoa_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("joaopessoa_deaths_pdeaths_vs_fitted"))
}
```

`r if ('macapa' %in% args$locs) '#### Macapa'`
`r if ('macapa' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('macapa' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("macapa_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("macapa_seq_propP1_over_time"))
}
```

`r if ('macapa' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('macapa' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("macapa_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("macapa_hospc_by_variant_with_empirical"))
}
```

`r if ('macapa' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('macapa' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("macapa_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("macapa_hosps_phosps_vs_fitted"))
}
```

`r if ('macapa' %in% args$locs) '##### Fit to death data'`
```{r, include=('macapa' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("macapa_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("macapa_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('macapa' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('macapa' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("macapa_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("macapa_deaths_pdeaths_vs_fitted"))
}
```

`r if ('manaus' %in% args$locs) '#### Manaus'`
`r if ('manaus' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('manaus' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("manaus_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("manaus_seq_propP1_over_time"))
}
```

`r if ('manaus' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('manaus' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("manaus_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("manaus_hospc_by_variant_with_empirical"))
}
```

`r if ('manaus' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('manaus' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("manaus_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("manaus_hosps_phosps_vs_fitted"))
}
```

`r if ('manaus' %in% args$locs) '##### Fit to death data'`
```{r, include=('manaus' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("manaus_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("manaus_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('manaus' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('manaus' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("manaus_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("manaus_deaths_pdeaths_vs_fitted"))
}
```

`r if ('natal' %in% args$locs) '#### Natal'`
`r if ('natal' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('natal' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("natal_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("natal_seq_propP1_over_time"))
}
```

`r if ('natal' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('natal' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("natal_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("natal_hospc_by_variant_with_empirical"))
}
```

`r if ('natal' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('natal' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("natal_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("natal_hosps_phosps_vs_fitted"))
}
```

`r if ('natal' %in% args$locs) '##### Fit to death data'`
```{r, include=('natal' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("natal_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("natal_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('natal' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('natal' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("natal_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("natal_deaths_pdeaths_vs_fitted"))
}
```

`r if ('portoalegre' %in% args$locs) '#### Porto Alegre'`
`r if ('portoalegre' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('portoalegre' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("portoalegre_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("portoalegre_seq_propP1_over_time"))
}
```

`r if ('portoalegre' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('portoalegre' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("portoalegre_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("portoalegre_hospc_by_variant_with_empirical"))
}
```

`r if ('portoalegre' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('portoalegre' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("portoalegre_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("portoalegre_hosps_phosps_vs_fitted"))
}
```

`r if ('portoalegre' %in% args$locs) '##### Fit to death data'`
```{r, include=('portoalegre' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("portoalegre_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("portoalegre_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('portoalegre' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('portoalegre' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("portoalegre_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("portoalegre_deaths_pdeaths_vs_fitted"))
}
```

`r if ('portovelho' %in% args$locs) '#### Porto Velho'`
`r if ('portovelho' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('portovelho' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("portovelho_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("portovelho_seq_propP1_over_time"))
}
```

`r if ('portovelho' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('portovelho' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("portovelho_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("portovelho_hospc_by_variant_with_empirical"))
}
```

`r if ('portovelho' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('portovelho' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("portovelho_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("portovelho_hosps_phosps_vs_fitted"))
}
```

`r if ('portovelho' %in% args$locs) '##### Fit to death data'`
```{r, include=('portovelho' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("portovelho_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("portovelho_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('portovelho' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('portovelho' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("portovelho_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("portovelho_deaths_pdeaths_vs_fitted"))
}
```

`r if ('riodejaneiro' %in% args$locs) '#### Rio de Janeiro'`
`r if ('riodejaneiro' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('riodejaneiro' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("riodejaneiro_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("riodejaneiro_seq_propP1_over_time"))
}
```

`r if ('riodejaneiro' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('riodejaneiro' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("riodejaneiro_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("riodejaneiro_hospc_by_variant_with_empirical"))
}
```

`r if ('riodejaneiro' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('riodejaneiro' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("riodejaneiro_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("riodejaneiro_hosps_phosps_vs_fitted"))
}
```

`r if ('riodejaneiro' %in% args$locs) '##### Fit to death data'`
```{r, include=('riodejaneiro' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("riodejaneiro_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("riodejaneiro_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('riodejaneiro' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('riodejaneiro' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("riodejaneiro_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("riodejaneiro_deaths_pdeaths_vs_fitted"))
}
```

`r if ('salvador' %in% args$locs) '#### Salvador'`
`r if ('salvador' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('salvador' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("salvador_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("salvador_seq_propP1_over_time"))
}
```

`r if ('salvador' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('salvador' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("salvador_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("salvador_hospc_by_variant_with_empirical"))
}
```

`r if ('salvador' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('salvador' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("salvador_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("salvador_hosps_phosps_vs_fitted"))
}
```

`r if ('salvador' %in% args$locs) '##### Fit to death data'`
```{r, include=('salvador' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("salvador_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("salvador_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('salvador' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('salvador' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("salvador_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("salvador_deaths_pdeaths_vs_fitted"))
}
```

`r if ('saopaulo' %in% args$locs) '#### Sao Paulo'`
`r if ('saopaulo' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('saopaulo' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("saopaulo_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("saopaulo_seq_propP1_over_time"))
}
```

`r if ('saopaulo' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('saopaulo' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("saopaulo_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("saopaulo_hospc_by_variant_with_empirical"))
}
```

`r if ('saopaulo' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('saopaulo' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("saopaulo_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("saopaulo_hosps_phosps_vs_fitted"))
}
```


`r if ('saopaulo' %in% args$locs) '##### Fit to death data'`
```{r, include=('saopaulo' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("saopaulo_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("saopaulo_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('saopaulo' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('saopaulo' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("saopaulo_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("saopaulo_deaths_pdeaths_vs_fitted"))
}
```

`r if ('saoluis' %in% args$locs) '#### Sao Luis'`
`r if ('saoluis' %in% args$locs) '##### Fit to genotype data'`
```{r, include=('saoluis' %in% args$locs), out.width="40%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("saoluis_seq_propP1_over_time"))){
  knitr::include_graphics(file.to.figure("saoluis_seq_propP1_over_time"))
}
```

`r if ('saoluis' %in% args$locs) '##### Fit to hospital admission data'`
```{r, include=('saoluis' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("saoluis_hospc_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("saoluis_hospc_by_variant_with_empirical"))
}
```

`r if ('saoluis' %in% args$locs) '##### Fit to share of age groups in hosp admissions'`
```{r, include=('saoluis' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("saoluis_hosps_phosps_vs_fitted"))){
  knitr::include_graphics(file.to.figure("saoluis_hosps_phosps_vs_fitted"))
}
```

`r if ('saoluis' %in% args$locs) '##### Fit to death data'`
```{r, include=('saoluis' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("saoluis_deaths_cdeaths_by_variant_with_empirical"))){
  knitr::include_graphics(file.to.figure("saoluis_deaths_cdeaths_by_variant_with_empirical"))
}
```

`r if ('saoluis' %in% args$locs) '##### Fit to share of age groups in deaths'`
```{r, include=('saoluis' %in% args$locs), out.width="120%", fig.show='hold', fig.align='centre', echo=FALSE}
if(file.exists(file.to.figure("saoluis_deaths_pdeaths_vs_fitted"))){
  knitr::include_graphics(file.to.figure("saoluis_deaths_pdeaths_vs_fitted"))
}
```
